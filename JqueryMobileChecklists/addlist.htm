<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<title>Mobile Checklists</title>

		<link rel="stylesheet" href="themes/kind_of_blue.min.css" />
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" />
		<!-- <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" /> -->


		<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
		<script>
			$(document).ready(function() {
				alert("Starting ...");
				$("#add-new-list-link-button").click(function(e) {
					// e.preventDefault();	
					addNewList();
				});	
			});

			function updateList(currentNames, newListName) {
				var updatedList = "";

				if(currentNames) {
					updatedList += (currentNames+ "," + newListName);
				} else {
					updatedList = newListName;
				}

				sessionStorage.setItem("list_names", updatedList);

				return updatedList;
			}


			function addNewList() {
				// alert("addNewList ...");
				var newListName = $("#new-list-name").val();
				$("#new-list-name").val("");   // clear values so not still sitting there next time user goes to page
				alert("List name = " + newListName);
				var listNamesInSession = sessionStorage.getItem("list_names");
				alert("list names in session = " + listNamesInSession);
				updateList(listNamesInSession, newListName);
				// alert("session storage latest list_names = " + sessionStorage.getItem("list_names"));
			}
		</script>
	</head>

	<body>
		<div>
			<h1>Mobile Checklists</h1>

			<!-- Page to add new list -->
			<div data-role="page" id="page-add-list" data-theme="a">
				<div data-role="header">
					<label>Enter New List Name</label>
				</div>
				<div data-role="content">
					<input type="text" id="new-list-name" />
					<a href="index.htm" id="add-new-list-link-button" data-role="button" data-transition="flow" data-icon="plus" data-iconpos="bottom" data-mini="true" data-inline="false" > </a>
				</div>
			</div>
		</div>
	</body>
</html>


